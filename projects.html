<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon">üìä</span>
                <span class="logo-text">ProjectHub</span>
            </div>
            <button class="sidebar-toggle" onclick="toggleSidebar()">
                <span class="hamburger"></span>
            </button>
        </div>
        
        <nav class="sidebar-nav">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üìã</span>
                        <span class="nav-text">Projects</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üë•</span>
                        <span class="nav-text">Teams</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Analytics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üìÅ</span>
                        <span class="nav-text">Documents</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text">Settings</span>
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">üë§</div>
                    <div class="user-info">
                        <div class="user-name">John Doe</div>
                        <div class="user-role">Project Manager</div>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <span class="nav-icon">üö™</span>
                    <span class="nav-text">Logout</span>
                </button>
            </div>
        </nav>
    </aside>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <button class="mobile-menu-btn" onclick="toggleSidebar()">
                    <span class="hamburger"></span>
                </button>
                <div class="breadcrumb">
                    <span class="breadcrumb-item">Home</span>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-item active">Projects</span>
                </div>
            </div>
            
            <div class="header-center">
                <div class="search-bar">
                    <input type="text" placeholder="Search projects, teams, documents..." class="global-search">
                    <button class="search-btn">üîç</button>
                </div>
            </div>
            
            <div class="header-right">
                <button class="header-btn notification-btn" onclick="showNotifications()">
                    <span class="icon">üîî</span>
                    <span class="badge">3</span>
                </button>
                <button class="header-btn profile-btn" onclick="showProfileMenu()">
                    <div class="profile-avatar">üë§</div>
                    <span class="profile-name">John Doe</span>
                    <span class="dropdown-arrow">‚ñº</span>
                </button>
            </div>
        </header>

    <!-- Header -->
        <header class="page-header">
        <div class="container">
            <div class="header-content">
                <h1 class="header-title">Project Management</h1>
                <button class="btn btn-primary" onclick="showAddProjectForm()">
                    <span class="icon">+</span>
                    New Project
                </button>
            </div>
        </div>
    </header>

        <!-- Main Content -->
        <main class="main-content">
        <div class="container">
            <!-- Project Form (Hidden by default) -->
            <div id="projectForm" class="form-section" style="display: none;">
                <div class="form-card">
                    <div class="form-header">
                        <h2>Create New Project</h2>
                        <button class="close-btn" onclick="hideAddProjectForm()">√ó</button>
                    </div>
                    <form id="newProjectForm" class="project-form">
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label for="projectTitle">Project Title</label>
                                <input type="text" id="projectTitle" name="projectTitle" required>
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="shortDescription">Short Description</label>
                                <textarea id="shortDescription" name="shortDescription" rows="3" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="department">Department</label>
                                <select id="department" name="department" required>
                                    <option value="">Select Department</option>
                                    <option value="IT">Information Technology</option>
                                    <option value="HR">Human Resources</option>
                                    <option value="Finance">Finance</option>
                                    <option value="Operations">Operations</option>
                                    <option value="Marketing">Marketing</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="sector">Sector</label>
                                <select id="sector" name="sector" required>
                                    <option value="">Select Sector</option>
                                    <option value="Healthcare">Healthcare</option>
                                    <option value="Education">Education</option>
                                    <option value="Infrastructure">Infrastructure</option>
                                    <option value="Technology">Technology</option>
                                    <option value="Agriculture">Agriculture</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="budget">Budget ($)</label>
                                <input type="number" id="budget" name="budget" min="0" step="1000" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="startDate">Start Date</label>
                                <input type="date" id="startDate" name="startDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="endDate">End Date</label>
                                <input type="date" id="endDate" name="endDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="stage">Current Stage</label>
                                <select id="stage" name="stage" required>
                                    <option value="Draft">Draft</option>
                                    <option value="Staging">Staging</option>
                                    <option value="Approved">Approved</option>
                                </select>
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="dprFile">Attach DPR Document</label>
                                <div class="file-input-wrapper">
                                    <input type="file" id="dprFile" name="dprFile" accept=".pdf,.doc,.docx">
                                    <span class="file-input-text">Choose file or drag here</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="saveAsDraft()">Save as Draft</button>
                            <button type="button" class="btn btn-primary" onclick="submitToStaging()">Submit to Staging</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Projects List -->
            <div class="projects-section">
                <div class="section-header">
                    <h2>Projects Overview</h2>
                    <div class="search-filters">
                        <input type="text" class="search-input" placeholder="Search projects..." onkeyup="filterProjects()">
                        <select class="filter-select" onchange="filterByStage()">
                            <option value="">All Stages</option>
                            <option value="Draft">Draft</option>
                            <option value="Staging">Staging</option>
                            <option value="Approved">Approved</option>
                        </select>
                    </div>
                </div>
                
                <div class="projects-grid" id="projectsGrid">
                    <!-- Sample Projects -->
                    <div class="project-card" data-stage="Draft">
                        <div class="project-header">
                            <h3 class="project-title">Healthcare Management System</h3>
                            <span class="stage-badge stage-draft">Draft</span>
                        </div>
                        <p class="project-description">Digital platform for patient records and appointment scheduling</p>
                        <div class="project-meta">
                            <div class="meta-item">
                                <span class="meta-label">Department:</span>
                                <span class="meta-value">IT</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Budget:</span>
                                <span class="meta-value">$450,000</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Duration:</span>
                                <span class="meta-value">Jan 2024 - Dec 2024</span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="action-btn edit" onclick="editProject(1)">Edit</button>
                            <button class="action-btn move" onclick="moveStage(1, 'Draft')">Move Stage</button>
                            <button class="action-btn view" onclick="viewDetails(1)">View Details</button>
                        </div>
                    </div>

                    <div class="project-card" data-stage="Staging">
                        <div class="project-header">
                            <h3 class="project-title">Smart Agriculture Initiative</h3>
                            <span class="stage-badge stage-staging">Staging</span>
                        </div>
                        <p class="project-description">IoT-based crop monitoring and automated irrigation system</p>
                        <div class="project-meta">
                            <div class="meta-item">
                                <span class="meta-label">Department:</span>
                                <span class="meta-value">Operations</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Budget:</span>
                                <span class="meta-value">$275,000</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Duration:</span>
                                <span class="meta-value">Mar 2024 - Nov 2024</span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="action-btn edit" onclick="editProject(2)">Edit</button>
                            <button class="action-btn move" onclick="moveStage(2, 'Staging')">Move Stage</button>
                            <button class="action-btn view" onclick="viewDetails(2)">View Details</button>
                        </div>
                    </div>

                    <div class="project-card" data-stage="Approved">
                        <div class="project-header">
                            <h3 class="project-title">Employee Training Platform</h3>
                            <span class="stage-badge stage-approved">Approved</span>
                        </div>
                        <p class="project-description">Comprehensive e-learning platform for staff development</p>
                        <div class="project-meta">
                            <div class="meta-item">
                                <span class="meta-label">Department:</span>
                                <span class="meta-value">HR</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Budget:</span>
                                <span class="meta-value">$180,000</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Duration:</span>
                                <span class="meta-value">Feb 2024 - Aug 2024</span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="action-btn edit" onclick="editProject(3)">Edit</button>
                            <button class="action-btn move" onclick="moveStage(3, 'Approved')">Move Stage</button>
                            <button class="action-btn view" onclick="viewDetails(3)">View Details</button>
                        </div>
                    </div>

                    <div class="project-card" data-stage="Staging">
                        <div class="project-header">
                            <h3 class="project-title">Financial Analytics Dashboard</h3>
                            <span class="stage-badge stage-staging">Staging</span>
                        </div>
                        <p class="project-description">Real-time financial reporting and analytics platform</p>
                        <div class="project-meta">
                            <div class="meta-item">
                                <span class="meta-label">Department:</span>
                                <span class="meta-value">Finance</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Budget:</span>
                                <span class="meta-value">$320,000</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Duration:</span>
                                <span class="meta-label">Apr 2024 - Oct 2024</span>
                            </div>
                        </div>
                        <div class="project-actions">
                            <button class="action-btn edit" onclick="editProject(4)">Edit</button>
                            <button class="action-btn move" onclick="moveStage(4, 'Staging')">Move Stage</button>
                            <button class="action-btn view" onclick="viewDetails(4)">View Details</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    </div>

    <!-- Notification Dropdown -->
    <div id="notificationDropdown" class="dropdown-menu notification-dropdown" style="display: none;">
        <div class="dropdown-header">
            <h3>Notifications</h3>
            <button class="mark-all-read">Mark all as read</button>
        </div>
        <div class="notification-list">
            <div class="notification-item unread">
                <div class="notification-icon">üìã</div>
                <div class="notification-content">
                    <div class="notification-title">Project Approved</div>
                    <div class="notification-text">Healthcare Management System has been approved</div>
                    <div class="notification-time">2 minutes ago</div>
                </div>
            </div>
            <div class="notification-item unread">
                <div class="notification-icon">üë•</div>
                <div class="notification-content">
                    <div class="notification-title">Team Update</div>
                    <div class="notification-text">New member added to Smart Agriculture team</div>
                    <div class="notification-time">1 hour ago</div>
                </div>
            </div>
            <div class="notification-item">
                <div class="notification-icon">üí∞</div>
                <div class="notification-content">
                    <div class="notification-title">Budget Alert</div>
                    <div class="notification-text">Financial Analytics project budget updated</div>
                    <div class="notification-time">3 hours ago</div>
                </div>
            </div>
        </div>
        <div class="dropdown-footer">
            <a href="#" class="view-all-link">View all notifications</a>
        </div>
    </div>

    <!-- Profile Dropdown -->
    <div id="profileDropdown" class="dropdown-menu profile-dropdown" style="display: none;">
        <div class="profile-info">
            <div class="profile-avatar large">üë§</div>
            <div class="profile-details">
                <div class="profile-name">John Doe</div>
                <div class="profile-email">john.doe@company.com</div>
            </div>
        </div>
        <div class="profile-menu">
            <a href="#" class="profile-menu-item">
                <span class="menu-icon">üë§</span>
                <span>My Profile</span>
            </a>
            <a href="#" class="profile-menu-item">
                <span class="menu-icon">‚öôÔ∏è</span>
                <span>Settings</span>
            </a>
            <a href="#" class="profile-menu-item">
                <span class="menu-icon">‚ùì</span>
                <span>Help & Support</span>
            </a>
            <hr class="menu-divider">
            <a href="#" class="profile-menu-item" onclick="logout()">
                <span class="menu-icon">üö™</span>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Confirm Action</h3>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p id="modalMessage">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" id="confirmBtn" onclick="confirmAction()">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification" style="display: none;">
        <div class="notification-content">
            <span id="notificationMessage"></span>
            <button class="notification-close" onclick="closeNotification()">√ó</button>
        </div>
    </div>

    <script>
        let currentAction = null;
        let currentProjectId = null;
        let sidebarOpen = true;

        // Sidebar functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainWrapper = document.querySelector('.main-wrapper');
            
            sidebarOpen = !sidebarOpen;
            
            if (sidebarOpen) {
                sidebar.classList.remove('collapsed');
                mainWrapper.classList.remove('sidebar-collapsed');
            } else {
                sidebar.classList.add('collapsed');
                mainWrapper.classList.add('sidebar-collapsed');
            }
        }

        // Header dropdown functionality
        function showNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            const profileDropdown = document.getElementById('profileDropdown');
            
            profileDropdown.style.display = 'none';
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        function showProfileMenu() {
            const dropdown = document.getElementById('profileDropdown');
            const notificationDropdown = document.getElementById('notificationDropdown');
            
            notificationDropdown.style.display = 'none';
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                showNotification('Logging out...', 'info');
                // Implement logout logic here
            }
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const notificationBtn = document.querySelector('.notification-btn');
            const profileBtn = document.querySelector('.profile-btn');
            const notificationDropdown = document.getElementById('notificationDropdown');
            const profileDropdown = document.getElementById('profileDropdown');
            
            if (!notificationBtn.contains(event.target) && !notificationDropdown.contains(event.target)) {
                notificationDropdown.style.display = 'none';
            }
            
            if (!profileBtn.contains(event.target) && !profileDropdown.contains(event.target)) {
                profileDropdown.style.display = 'none';
            }
        });

        // Navigation active state
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });

        function showAddProjectForm() {
            document.getElementById('projectForm').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function hideAddProjectForm() {
            document.getElementById('projectForm').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('newProjectForm').reset();
        }

        function saveAsDraft() {
            showNotification('Project saved as draft successfully!', 'success');
            hideAddProjectForm();
        }

        function submitToStaging() {
            showModal(
                'Submit to Staging',
                'This will notify the department head for review. Continue?',
                () => {
                    showNotification('Project submitted to staging! Department head has been notified.', 'success');
                    hideAddProjectForm();
                    closeModal();
                }
            );
        }

        function moveStage(projectId, currentStage) {
            let nextStage = '';
            let message = '';
            
            if (currentStage === 'Draft') {
                nextStage = 'Staging';
                message = 'Move project to staging? The department head will be notified for review.';
            } else if (currentStage === 'Staging') {
                nextStage = 'Approved';
                message = 'Approve this project? This action will finalize the project approval.';
            } else {
                showNotification('Project is already at the final stage.', 'info');
                return;
            }

            showModal(
                'Move to ' + nextStage,
                message,
                () => {
                    // Update the project card stage
                    const projectCard = document.querySelector(`[onclick="moveStage(${projectId}, '${currentStage}')"]`).closest('.project-card');
                    const stageBadge = projectCard.querySelector('.stage-badge');
                    stageBadge.textContent = nextStage;
                    stageBadge.className = `stage-badge stage-${nextStage.toLowerCase()}`;
                    projectCard.dataset.stage = nextStage;
                    
                    // Update the move stage button
                    const moveBtn = projectCard.querySelector('.move');
                    moveBtn.setAttribute('onclick', `moveStage(${projectId}, '${nextStage}')`);
                    
                    showNotification(`Project moved to ${nextStage} successfully!`, 'success');
                    closeModal();
                }
            );
        }

        function editProject(id) {
            showNotification(`Edit functionality for project ${id} would be implemented here.`, 'info');
        }

        function viewDetails(id) {
            showNotification(`Project ${id} details would be displayed in a detailed view.`, 'info');
        }

        function showModal(title, message, confirmCallback) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            document.getElementById('confirmationModal').style.display = 'block';
            currentAction = confirmCallback;
        }

        function closeModal() {
            document.getElementById('confirmationModal').style.display = 'none';
            currentAction = null;
        }

        function confirmAction() {
            if (currentAction) {
                currentAction();
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const messageEl = document.getElementById('notificationMessage');
            messageEl.textContent = message;
            notification.className = `notification notification-${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                closeNotification();
            }, 5000);
        }

        function closeNotification() {
            document.getElementById('notification').style.display = 'none';
        }

        function filterProjects() {
            const searchTerm = event.target.value.toLowerCase();
            const projectCards = document.querySelectorAll('.project-card');
            
            projectCards.forEach(card => {
                const title = card.querySelector('.project-title').textContent.toLowerCase();
                const description = card.querySelector('.project-description').textContent.toLowerCase();
                const department = card.querySelector('.meta-value').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm) || department.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function filterByStage() {
            const selectedStage = event.target.value;
            const projectCards = document.querySelectorAll('.project-card');
            
            projectCards.forEach(card => {
                if (!selectedStage || card.dataset.stage === selectedStage) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('confirmationModal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>